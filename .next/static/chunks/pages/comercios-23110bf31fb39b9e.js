(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{5626:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/comercios",function(){return r(5925)}])},8969:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),s=r(1924),a=r(1868);function o(e){var t=e.onMenuClick,r=e.title,o=a.I8.getCurrentUser();return(0,n.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 h-20 flex items-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 w-full",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{onClick:t,className:"lg:hidden p-2 rounded-md hover:bg-gray-100 mr-2",children:(0,n.jsx)(s.Z,{className:"h-6 w-6"})}),(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:r})]}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["Bienvenido, ",(null==o?void 0:o.name)||"Usuario"]})})]})})}},2116:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(5893),s=r(7294),a=r(1163),o=r(1868);function i(e){var t=e.children,r=(0,a.useRouter)(),i=(0,s.useState)(!0),c=i[0],l=i[1];return((0,s.useEffect)(function(){o.I8.isAuthenticated()?l(!1):r.push("/login")},[r]),c)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,n.jsx)(n.Fragment,{children:t})}},8694:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var n=r(5893),s=r(1664),a=r.n(s),o=r(1163),i=r(1868),c=r(5491),l=r(8936),u=r(2656),d=r(8519),m=r(1203),h=r(9067);function x(e){var t,r,s,x,f=e.isOpen,p=e.onToggle,y=(0,o.useRouter)().pathname,b=function(){i.I8.logout(),window.location.href="/login"},g=[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"Usuarios",href:"/usuarios",icon:l.Z},{name:"Transacciones",href:"/transacciones",icon:u.Z},{name:"Comercios",href:"/comercios",icon:d.Z},];return(0,n.jsxs)(n.Fragment,{children:[f&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:p}),(0,n.jsxs)("div",{className:"\n        fixed top-0 left-0 h-full w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-50\n        ".concat(f?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:shadow-lg lg:flex-shrink-0\n      "),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 h-20 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center mr-3",children:(0,n.jsx)("span",{className:"text-primary-600 font-bold text-lg",children:"B"})}),(0,n.jsx)("h1",{className:"text-xl font-bold text-white",children:"Bancao Admin"})]}),(0,n.jsx)("button",{onClick:p,className:"lg:hidden p-2 rounded-md hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,n.jsx)(m.Z,{className:"h-5 w-5 text-white"})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,n.jsx)("nav",{className:"p-4",children:(0,n.jsx)("div",{className:"space-y-2",children:g.map(function(e){var t=e.icon,r=y===e.href;return(0,n.jsx)(a(),{href:e.href,className:"\n                      flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer\n                      ".concat(r?"bg-primary-100 text-primary-700 shadow-sm border border-primary-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 hover:shadow-sm","\n                    "),onClick:function(){window.innerWidth<1024&&p()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(t,{className:"mr-3 h-5 w-5 ".concat(r?"text-primary-600":"text-gray-400")}),(0,n.jsx)("span",{className:"font-medium",children:e.name})]})},e.name)})})})}),(0,n.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)("div",{className:"flex items-center px-3 py-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:(0,n.jsx)("span",{className:"text-primary-600 font-semibold text-sm",children:(null===(t=i.I8.getCurrentUser())||void 0===t?void 0:null===(r=t.name)||void 0===r?void 0:r.charAt(0))||"U"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(s=i.I8.getCurrentUser())||void 0===s?void 0:s.name)||"Usuario"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(null===(x=i.I8.getCurrentUser())||void 0===x?void 0:x.email)||"usuario@email.com"})]})]})}),(0,n.jsxs)("button",{onClick:b,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-lg transition-colors border border-transparent hover:border-red-200",children:[(0,n.jsx)(h.Z,{className:"mr-3 h-4 w-4"}),"Cerrar Sesi\xf3n"]})]})]})]})}},1868:function(e,t,r){"use strict";r.d(t,{I8:function(){return f}});var n=r(7568),s=r(7582);r(1876).Buffer;var a,o,i="auth_token",c="auth_user",l=function(){var e=localStorage.getItem(c);return e?JSON.parse(e):null},u=function(e,t){localStorage.setItem(i,e),localStorage.setItem(c,JSON.stringify(t))},d=function(){localStorage.removeItem(i),localStorage.removeItem(c)},m=function(){return!!localStorage.getItem(i)},h=(a=(0,n.Z)(function(e){var t,r,n,a,o,i;return(0,s.__generator)(this,function(s){switch(s.label){case 0:t=e.email,r=e.password,s.label=1;case 1:return s.trys.push([1,5,,6]),n="http://localhost:8080/api/",[4,fetch("".concat(n,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})})];case 2:if(!(a=s.sent()).ok)return[3,4];return[4,a.json()];case 3:return[2,s.sent()];case 4:return[2,null];case 5:return i=s.sent(),console.error("Error en autenticaci\xf3n:",i),[2,null];case 6:return[2]}})}),function(e){return a.apply(this,arguments)}),x=function(){d()},f={login:(o=(0,n.Z)(function(e,t){var r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,h({email:e,password:t})];case 1:if(r=n.sent())return u(r.token,r.user),[2,{success:!0,user:r.user}];return[2,{success:!1,error:"Credenciales inv\xe1lidas"}]}})}),function(e,t){return o.apply(this,arguments)}),logout:x,isAuthenticated:m,getCurrentUser:l}},5925:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(7568),s=r(1799);function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var o=r(797),i=r(7582),c=r(5893),l=r(7294),u=r(8694),d=r(8969),m=r(2116),h=r(8387);let x=(0,h.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),f=(0,h.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),p=(0,h.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),y=(0,h.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);var b=r(6455),g=r.n(b);function j(e){var t=e.isOpen,r=e.onClose,n=e.onCreate,i=(0,l.useState)({responsible:"",name:"",phone:"",accounts:[""]}),u=i[0],d=i[1],m=function(e){if(e.preventDefault(),!u.responsible||!u.name||!u.phone){g().fire({icon:"error",title:"Required fields",text:"Please complete all required fields",confirmButtonText:"OK"});return}var t=u.accounts.filter(function(e){return""!==e.trim()});n({responsible:u.responsible,name:u.name,phone:u.phone,accounts:t}),d({responsible:"",name:"",phone:"",accounts:[""]}),r()},h=function(){d(function(e){return a((0,s.Z)({},e),{accounts:(0,o.Z)(e.accounts).concat([""])})})},f=function(e){d(function(t){return a((0,s.Z)({},t),{accounts:t.accounts.filter(function(t,r){return r!==e})})})},p=function(e,t){d(function(r){return a((0,s.Z)({},r),{accounts:r.accounts.map(function(r,n){return n===e?t:r})})})};return t?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Merchant"}),(0,c.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"âœ•"})]}),(0,c.jsxs)("form",{onSubmit:m,className:"p-6 space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsible *"}),(0,c.jsx)("input",{type:"text",value:u.responsible,onChange:function(e){return d(function(t){return a((0,s.Z)({},t),{responsible:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Responsible person name"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant Name *"}),(0,c.jsx)("input",{type:"text",value:u.name,onChange:function(e){return d(function(t){return a((0,s.Z)({},t),{name:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Merchant name"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,c.jsx)("input",{type:"tel",value:u.phone,onChange:function(e){return d(function(t){return a((0,s.Z)({},t),{phone:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Phone number"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accounts (Phone numbers)"}),u.accounts.map(function(e,t){return(0,c.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,c.jsx)("input",{type:"tel",value:e,onChange:function(e){return p(t,e.target.value)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Phone number"}),u.accounts.length>1&&(0,c.jsx)("button",{type:"button",onClick:function(){return f(t)},className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:(0,c.jsx)(x,{className:"h-4 w-4"})})]},t)}),(0,c.jsx)("button",{type:"button",onClick:h,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"+ Add account"})]}),(0,c.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,c.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Create Merchant"})]})]})]})}):null}function v(e){var t=e.isOpen,r=e.onClose,n=e.merchant;return t&&n?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,c.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Accounts for ",n.name]}),(0,c.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"âœ•"})]}),(0,c.jsx)("div",{className:"p-6",children:(0,c.jsx)("div",{className:"space-y-3",children:n.accounts.map(function(e,t){return(0,c.jsxs)("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,c.jsx)(f,{className:"h-4 w-4 text-gray-500"}),(0,c.jsx)("span",{className:"text-gray-900 font-medium",children:e})]},t)})})}),(0,c.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,c.jsx)("button",{onClick:r,className:"w-full px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Close"})})]})}):null}function N(e){var t,r=e.isOpen,u=e.onClose,d=e.merchant,m=e.onUpdate,h=(0,l.useState)({responsible:"",name:"",phone:"",accounts:[""]}),f=h[0],p=h[1];(0,l.useEffect)(function(){d&&r&&p({responsible:d.responsible,name:d.name,phone:d.phone,accounts:d.accounts.length>0?d.accounts:[""]})},[d,r]);var y=(t=(0,n.Z)(function(e){var t,r,n,o,c,l,h;return(0,i.__generator)(this,function(i){switch(i.label){case 0:if(e.preventDefault(),!f.responsible||!f.name||!f.phone)return g().fire({icon:"error",title:"Required fields",text:"Please complete all required fields",confirmButtonText:"OK"}),[2];if(!d)return[2];i.label=1;case 1:return i.trys.push([1,7,,8]),t="http://localhost:8080/api/",r=f.accounts.filter(function(e){return""!==e.trim()}),n=a((0,s.Z)({},d),{responsible:f.responsible,name:f.name,phone:f.phone,accounts:r}),[4,fetch("".concat(t,"merchants/").concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})];case 2:if(!(o=i.sent()).ok)return[3,4];return[4,o.json()];case 3:return m(i.sent()),u(),g().fire({icon:"success",title:"Merchant updated",text:"The merchant has been updated successfully",timer:2e3,showConfirmButton:!1}),[3,6];case 4:return[4,o.text()];case 5:l=i.sent(),g().fire({icon:"error",title:"Error updating merchant",text:l||"Failed to update merchant",confirmButtonText:"OK"}),i.label=6;case 6:return[3,8];case 7:return h=i.sent(),console.error("Error updating merchant:",h),g().fire({icon:"error",title:"Connection error",text:"Could not connect to the server",confirmButtonText:"OK"}),[3,8];case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),b=function(){p(function(e){return a((0,s.Z)({},e),{accounts:(0,o.Z)(e.accounts).concat([""])})})},j=function(e){p(function(t){return a((0,s.Z)({},t),{accounts:t.accounts.filter(function(t,r){return r!==e})})})},v=function(e,t){p(function(r){return a((0,s.Z)({},r),{accounts:r.accounts.map(function(r,n){return n===e?t:r})})})};return r&&d?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Merchant"}),(0,c.jsx)("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"âœ•"})]}),(0,c.jsxs)("form",{onSubmit:y,className:"p-6 space-y-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsible *"}),(0,c.jsx)("input",{type:"text",value:f.responsible,onChange:function(e){return p(function(t){return a((0,s.Z)({},t),{responsible:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Responsible person name"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant Name *"}),(0,c.jsx)("input",{type:"text",value:f.name,onChange:function(e){return p(function(t){return a((0,s.Z)({},t),{name:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Merchant name"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),(0,c.jsx)("input",{type:"tel",value:f.phone,onChange:function(e){return p(function(t){return a((0,s.Z)({},t),{phone:e.target.value})})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Phone number"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accounts (Phone numbers)"}),f.accounts.map(function(e,t){return(0,c.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,c.jsx)("input",{type:"tel",value:e,onChange:function(e){return v(t,e.target.value)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Phone number"}),f.accounts.length>1&&(0,c.jsx)("button",{type:"button",onClick:function(){return j(t)},className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:(0,c.jsx)(x,{className:"h-4 w-4"})})]},t)}),(0,c.jsx)("button",{type:"button",onClick:b,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"+ Add account"})]}),(0,c.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,c.jsx)("button",{type:"button",onClick:u,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,c.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:"Update Merchant"})]})]})]})}):null}function w(){var e,t=(0,l.useState)([]),r=t[0],s=t[1],a=(0,l.useState)(!0),h=a[0],f=a[1],b=(0,l.useState)({page:1,limit:10,total:0,totalPages:0}),w=(b[0],b[1]),C=(0,l.useState)(!1),k=C[0],Z=C[1],O=(0,l.useState)(!1),S=O[0],P=O[1],A=(0,l.useState)(!1),M=A[0],T=A[1],_=(0,l.useState)(!1),B=_[0],E=_[1],I=(0,l.useState)(null),U=I[0],D=I[1];(0,l.useEffect)(function(){q()},[]);var R,q=(e=(0,n.Z)(function(){var e,t,r,n,a;return(0,i.__generator)(this,function(n){switch(n.label){case 0:f(!0),n.label=1;case 1:return n.trys.push([1,6,7,8]),e="http://localhost:8080/api/",[4,fetch("".concat(e,"merchants"),{method:"GET",headers:{"Content-Type":"application/json"}})];case 2:if(!(t=n.sent()).ok)return[3,4];return[4,t.json()];case 3:return r=n.sent(),console.log("Backend response:",r),s(Array.isArray(r.merchants)?r.merchants:[]),r.pagination&&w({page:r.pagination.page||1,limit:r.pagination.limit||10,total:r.pagination.total||0,totalPages:r.pagination.totalPages||0}),[3,5];case 4:console.error("Error loading merchants:",t.statusText),s([]),n.label=5;case 5:return[3,8];case 6:return a=n.sent(),console.error("Error loading merchants:",a),s([]),[3,8];case 7:return f(!1),[7];case 8:return[2]}})}),function(){return e.apply(this,arguments)}),z=(R=(0,n.Z)(function(e){var t,r,n,a,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),t="http://localhost:8080/api/",[4,fetch("".concat(t,"merchants"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:if(!(r=i.sent()).ok)return[3,3];return[4,r.json()];case 2:return n=i.sent(),s(function(e){return[n].concat((0,o.Z)(e))}),g().fire({icon:"success",title:"Merchant created",text:"The merchant has been created successfully",timer:2e3,showConfirmButton:!1}),[3,5];case 3:return[4,r.text()];case 4:a=i.sent(),g().fire({icon:"error",title:"Error creating merchant",text:a||"Failed to create merchant",confirmButtonText:"OK"}),i.label=5;case 5:return[3,7];case 6:return c=i.sent(),console.error("Error creating merchant:",c),g().fire({icon:"error",title:"Connection error",text:"Could not connect to the server",confirmButtonText:"OK"}),[3,7];case 7:return[2]}})}),function(e){return R.apply(this,arguments)}),K=function(e){D(e),E(!0)},J=function(e){s(function(t){return t.map(function(t){return t.id===e.id?e:t})})},L=function(e){g().fire({title:"Are you sure?",text:'Do you want to delete the merchant "'.concat(e.name,'"?'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(function(t){t.isConfirmed&&(s(function(t){return t.filter(function(t){return t.id!==e.id})}),g().fire({icon:"success",title:"Deleted",text:"The merchant has been deleted",timer:2e3,showConfirmButton:!1}))})},V=function(e){D(e),T(!0)};return(0,c.jsxs)(m.Z,{children:[(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,c.jsx)(u.Z,{isOpen:k,onToggle:function(){return Z(!k)}}),(0,c.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,c.jsx)(d.Z,{onMenuClick:function(){return Z(!k)},title:"Merchants"}),(0,c.jsx)("main",{className:"flex-1 p-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Merchant Management"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Manage system merchants"})]}),(0,c.jsxs)("button",{onClick:function(){return P(!0)},className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors",children:[(0,c.jsx)(p,{className:"h-4 w-4 mr-2"}),"Create"]})]}),h?(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Loading merchants..."})]}):Array.isArray(r)&&0!==r.length?(0,c.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsible"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Verify Accounts"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(r)&&r.map(function(e){return(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.responsible}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,c.jsx)("button",{onClick:function(){return V(e)},className:"text-primary-600 hover:text-primary-700 font-medium",children:"View details"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,c.jsxs)("div",{className:"flex space-x-2",children:[(0,c.jsx)("button",{onClick:function(){return K(e)},className:"text-blue-600 hover:text-blue-700 p-1",title:"Edit",children:(0,c.jsx)(y,{className:"h-4 w-4"})}),(0,c.jsx)("button",{onClick:function(){return L(e)},className:"text-red-600 hover:text-red-700 p-1",title:"Delete",children:(0,c.jsx)(x,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}):(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,c.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,c.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No merchants found"}),(0,c.jsx)("p",{className:"text-gray-500",children:"Start by creating your first merchant."})]})]})})]})]}),(0,c.jsx)(j,{isOpen:S,onClose:function(){return P(!1)},onCreate:z}),(0,c.jsx)(v,{isOpen:M,onClose:function(){return T(!1)},merchant:U}),(0,c.jsx)(N,{isOpen:B,onClose:function(){return E(!1)},merchant:U,onUpdate:J})]})}},797:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,{Z:function(){return s}})}},function(e){e.O(0,[166,903,103,774,888,179],function(){return e(e.s=5626)}),_N_E=e.O()}]);