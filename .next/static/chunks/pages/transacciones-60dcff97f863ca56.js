(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[711],{5347:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/transacciones",function(){return t(2566)}])},8969:function(e,r,t){"use strict";t.d(r,{Z:function(){return c}});var n=t(5893),a=t(1924),s=t(1868);function c(e){var r=e.onMenuClick,t=e.title,c=s.I8.getCurrentUser();return(0,n.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 h-20 flex items-center",children:(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 w-full",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("button",{onClick:r,className:"lg:hidden p-2 rounded-md hover:bg-gray-100 mr-2",children:(0,n.jsx)(a.Z,{className:"h-6 w-6"})}),(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:t})]}),(0,n.jsx)("div",{className:"flex items-center space-x-4",children:(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["Bienvenido, ",(null==c?void 0:c.name)||"Usuario"]})})]})})}},2116:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(5893),a=t(7294),s=t(1163),c=t(1868);function i(e){var r=e.children,t=(0,s.useRouter)(),i=(0,a.useState)(!0),o=i[0],l=i[1];return((0,a.useEffect)(function(){c.I8.isAuthenticated()?l(!1):t.push("/login")},[t]),o)?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,n.jsx)(n.Fragment,{children:r})}},8694:function(e,r,t){"use strict";t.d(r,{Z:function(){return f}});var n=t(5893),a=t(1664),s=t.n(a),c=t(1163),i=t(1868),o=t(5491),l=t(8936),d=t(2656),u=t(1203),m=t(9067);function f(e){var r,t,a,f,x=e.isOpen,h=e.onToggle,p=(0,c.useRouter)().pathname,g=function(){i.I8.logout(),window.location.href="/login"},y=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"Usuarios",href:"/usuarios",icon:l.Z},{name:"Transacciones",href:"/transacciones",icon:d.Z},];return(0,n.jsxs)(n.Fragment,{children:[x&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:h}),(0,n.jsxs)("div",{className:"\n        fixed top-0 left-0 h-full w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out z-50\n        ".concat(x?"translate-x-0":"-translate-x-full","\n        lg:translate-x-0 lg:static lg:shadow-lg lg:flex-shrink-0\n      "),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 h-20 border-b border-gray-200 bg-gradient-to-r from-primary-600 to-primary-700",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center mr-3",children:(0,n.jsx)("span",{className:"text-primary-600 font-bold text-lg",children:"B"})}),(0,n.jsx)("h1",{className:"text-xl font-bold text-white",children:"Bancao Admin"})]}),(0,n.jsx)("button",{onClick:h,className:"lg:hidden p-2 rounded-md hover:bg-white hover:bg-opacity-20 transition-colors",children:(0,n.jsx)(u.Z,{className:"h-5 w-5 text-white"})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,n.jsx)("nav",{className:"p-4",children:(0,n.jsx)("div",{className:"space-y-2",children:y.map(function(e){var r=e.icon,t=p===e.href;return(0,n.jsx)(s(),{href:e.href,className:"\n                      flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 cursor-pointer\n                      ".concat(t?"bg-primary-100 text-primary-700 shadow-sm border border-primary-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 hover:shadow-sm","\n                    "),onClick:function(){window.innerWidth<1024&&h()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r,{className:"mr-3 h-5 w-5 ".concat(t?"text-primary-600":"text-gray-400")}),(0,n.jsx)("span",{className:"font-medium",children:e.name})]})},e.name)})})})}),(0,n.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)("div",{className:"flex items-center px-3 py-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:(0,n.jsx)("span",{className:"text-primary-600 font-semibold text-sm",children:(null===(r=i.I8.getCurrentUser())||void 0===r?void 0:null===(t=r.name)||void 0===t?void 0:t.charAt(0))||"U"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null===(a=i.I8.getCurrentUser())||void 0===a?void 0:a.name)||"Usuario"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(null===(f=i.I8.getCurrentUser())||void 0===f?void 0:f.email)||"usuario@email.com"})]})]})}),(0,n.jsxs)("button",{onClick:g,className:"flex items-center w-full px-4 py-2 text-sm font-medium text-gray-600 hover:bg-red-50 hover:text-red-600 rounded-lg transition-colors border border-transparent hover:border-red-200",children:[(0,n.jsx)(m.Z,{className:"mr-3 h-4 w-4"}),"Cerrar Sesi\xf3n"]})]})]})]})}},1868:function(e,r,t){"use strict";t.d(r,{I8:function(){return o}});var n,a=t(7568),s=t(7582);(0,a.Z)(function(e){var r,t;return(0,s.__generator)(this,function(n){return(r=e.email,t=e.password,r&&t)?[2,{id:"1",email:r,name:"Administrador"}]:[2,null]})});var c=!1,i=null,o={login:function(e,r){return new Promise(function(t){setTimeout(function(){e&&r?(c=!0,t({success:!0,user:i={id:"1",email:e,name:"Administrador"}})):t({success:!1,error:"Credenciales requeridas"})},1e3)})},logout:function(){c=!1,i=null},isAuthenticated:function(){return c},getCurrentUser:function(){return i}}},2566:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return b}});var n=t(7568),a=t(797),s=t(7582),c=t(5893),i=t(7294),o=t(7119),l=t(8387);let d=(0,l.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),u=(0,l.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=t(9638),f=t(6615),x=t(1203);function h(e){var r=e.isOpen,t=e.onClose,n=e.onApprove,a=e.onReject,s=e.transactionData,o=(0,i.useRef)(null),l=function(){if(o.current){var e=o.current.scrollHeight;o.current.scrollTop=.23*e}};return((0,i.useEffect)(function(){if(r&&o.current){var e=setTimeout(function(){l()},200);return function(){return clearTimeout(e)}}},[r]),r)?(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Revisar Transacci\xf3n"}),(0,c.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,c.jsx)(x.Z,{className:"h-5 w-5"})})]}),(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("div",{className:"flex justify-center mb-6",children:(0,c.jsx)("div",{ref:o,className:"w-full max-w-2xl h-96 bg-gray-100 rounded-lg border-2 border-gray-200 overflow-auto",children:(0,c.jsx)("img",{src:s.support_url||"https://images.ctfassets.net/h9i30ml9c3lu/7qyJQDzrFkrLUEHLjTFNfW/ab29db116d437148473d2e2f67463dfb/NEQUI.jpg",alt:"Comprobante de transacci\xf3n",className:"w-4/5 h-auto rounded-lg mx-auto",style:{transform:"scale(0.8)"},onLoad:l,onError:function(e){var r,t=e.target;t.style.display="none";var n=t.parentElement;n&&(n.innerHTML='\n                      <div class="text-center p-4">\n                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3">\n                          <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>\n                          </svg>\n                        </div>\n                        <p class="text-sm text-gray-600 font-medium mb-3">Comprobante de transacci\xf3n</p>\n                        <div class="bg-gray-50 rounded-lg p-3 border">\n                          <div class="text-xs text-gray-600 space-y-1">\n                            <p><strong>Para:</strong> '.concat(s.cliente,"</p>\n                            <p><strong>Monto:</strong> ").concat((r=s.monto,new Intl.NumberFormat("es-CO",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(r)),"</p>\n                            <p><strong>Referencia:</strong> ").concat(s.referencia,"</p>\n                          </div>\n                        </div>\n                      </div>\n                    "))}})})}),(0,c.jsx)("div",{className:"space-y-3 mb-6",children:(0,c.jsx)("div",{className:"text-center",children:(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"\xbfDeseas aprobar o rechazar esta transacci\xf3n?"})})}),(0,c.jsxs)("div",{className:"flex space-x-3",children:[(0,c.jsx)("button",{onClick:n,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Aprobar"}),(0,c.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Rechazar"})]})]})]})}):null}function p(e){var r,t=e.data,l=e.searchPlaceholder,x=e.itemsPerPage,p=void 0===x?10:x,g=(e.onTransactionRemove,e.onTransactionAction),y=(0,i.useState)(""),v=y[0],b=y[1],j=(0,i.useState)(1),w=j[0],N=j[1],C=(0,i.useState)(null),k=C[0],_=C[1],E=(0,i.useState)("asc"),S=E[0],A=E[1],Z=(0,i.useState)(null),T=Z[0],I=Z[1],L=(0,i.useState)(!1),M=L[0],R=L[1],U=(0,i.useState)(null),O=U[0],P=U[1],F=(0,i.useState)(new Set),D=F[0],z=F[1],B=(0,i.useMemo)(function(){return v?t.filter(function(e){return e.referencia.toLowerCase().includes(v.toLowerCase())||e.cliente.toLowerCase().includes(v.toLowerCase())||e.estado.toLowerCase().includes(v.toLowerCase())||e.monto.toString().includes(v)}):t},[t,v]),q=(0,i.useMemo)(function(){return k?(0,a.Z)(B).sort(function(e,r){var t=e[k],n=r[k];return("monto"===k&&(t=Number(t),n=Number(n)),t<n)?"asc"===S?-1:1:t>n?"asc"===S?1:-1:0}):B},[B,k,S]),H=Math.ceil(q.length/p),W=(w-1)*p,G=W+p,J=q.slice(W,G),Q=function(e){k===e?A("asc"===S?"desc":"asc"):(_(e),A("asc"))},X=function(e){N(e)},V=function(e){var r="status-badge";switch(e){case"Aceptada":case"approved":return"".concat(r," status-accepted");case"Abierta":case"open":return"".concat(r," status-open");case"Borrador":case"draft":default:return"".concat(r," status-draft");case"Pendiente":case"pending":return"".concat(r," status-pending");case"Completada":case"completed":return"".concat(r," status-completed");case"Cancelada":case"rejected":return"".concat(r," status-cancelled");case"reviewed":return"".concat(r," status-reviewed")}},$=function(){R(!1),I(null)},K=function(){T&&g&&g(T.id,"approve"),$()},Y=function(){T&&g&&g(T.id,"reject"),$()},ee=(r=(0,n.Z)(function(e){var r,t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:if(!g)return[3,6];P(e.id),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,g(e.id,"review")];case 2:if("disableReview"===(r=n.sent()).outcome)return z(function(r){return new Set(r).add(e.id)}),[2];if("removed"===r.outcome)return[2];return I(e),R(!0),[3,5];case 3:return t=n.sent(),console.error("Error al revisar transacci\xf3n:",t),[3,5];case 4:return P(null),[7];case 5:return[3,7];case 6:I(e),R(!0),n.label=7;case 7:return[2]}})}),function(e){return r.apply(this,arguments)});return(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,c.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,c.jsx)("input",{type:"text",placeholder:void 0===l?"Buscar transacciones...":l,value:v,onChange:function(e){return b(e.target.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 table-stripe",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return Q("monto")},children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("span",{children:"MONTO"}),"monto"===k&&(0,c.jsx)("span",{className:"text-primary-600",children:"asc"===S?"↑":"↓"})]})}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return Q("referencia")},children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("span",{children:"REFERENCIA"}),"referencia"===k&&(0,c.jsx)("span",{className:"text-primary-600",children:"asc"===S?"↑":"↓"})]})}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return Q("cliente")},children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("span",{children:"CLIENTE"}),"cliente"===k&&(0,c.jsx)("span",{className:"text-primary-600",children:"asc"===S?"↑":"↓"})]})}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return Q("fecha")},children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("span",{children:"FECHA"}),"fecha"===k&&(0,c.jsx)("span",{className:"text-primary-600",children:"asc"===S?"↑":"↓"})]})}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACCIONES"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map(function(e,r){var t;return(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[(t=e.monto,new Intl.NumberFormat("es-CO",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t))," USD"]}),(0,c.jsx)(d,{className:"h-3 w-3 text-gray-400"}),(0,c.jsx)("span",{className:V(e.estado),children:e.estado})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.referencia}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.cliente}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.fecha||e.fechaCreacion}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,c.jsx)("button",{onClick:function(){return ee(e)},disabled:O===e.id||D.has(e.id),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O===e.id?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600 mr-2"}),"Procesando..."]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u,{className:"h-4 w-4 mr-2"}),"Revisar"]})})})]},e.id)})})]})}),(0,c.jsxs)("div",{className:"px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",W+1," a ",Math.min(G,q.length)," de ",q.length," resultados"]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("button",{onClick:function(){return X(w-1)},disabled:1===w,className:"p-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,c.jsx)(m.Z,{className:"h-4 w-4"})}),(0,c.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:H},function(e,r){return r+1}).map(function(e){return(0,c.jsx)("button",{onClick:function(){return X(e)},className:"\n                  px-3 py-1 text-sm rounded-md\n                  ".concat(w===e?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100","\n                "),children:e},e)})}),(0,c.jsx)("button",{onClick:function(){return X(w+1)},disabled:w===H,className:"p-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,c.jsx)(f.Z,{className:"h-4 w-4"})})]})]}),T&&(0,c.jsx)(h,{isOpen:M,onClose:$,onApprove:K,onReject:Y,transactionData:{id:T.id,referencia:T.referencia,monto:T.monto,cliente:T.cliente,support_url:T.support_url}})]})}var g=t(8694),y=t(8969),v=t(2116);function b(){var e=(0,i.useState)([]),r=e[0],t=e[1],o=(0,i.useState)(!1),l=(o[0],o[1]),d=(0,i.useState)(!1),u=d[0],m=d[1],f=(0,i.useRef)(null),x=function(){m(!u)};(0,i.useEffect)(function(){var e;return(e=(0,n.Z)(function(){var e,r,n,a,c,i,o,d;return(0,s.__generator)(this,function(r){switch(r.label){case 0:l(!0),r.label=1;case 1:return r.trys.push([1,7,8,9]),e="http://localhost:8080/api/",[4,fetch("".concat(e,"transactions"),{method:"GET",headers:{"Content-Type":"application/json"}})];case 2:if(!(n=r.sent()).ok)return[3,4];return[4,n.json()];case 3:return t((Array.isArray(a=r.sent())?a:[]).map(function(e){return{id:e.id,referencia:e.reference,monto:e.amount,fecha:e.date,estado:e.status,cliente:e.destination_account,vencimiento:"",fechaCreacion:e.date,payment_method:e.payment_method,amount:e.amount,destination_account:e.destination_account,source_account:e.source_account,beneficiary:e.beneficiary,whatsapp_phone:e.whatsapp_phone,support_url:e.support_url,date:e.date,userId:e.userId,createdAt:e.createdAt,updatedAt:e.updatedAt}}).filter(function(e){return"pending"===String(e.estado||"").toLowerCase()})),[3,6];case 4:return[4,n.text().catch(function(){return n.statusText})];case 5:o=r.sent(),console.error("Error al cargar transacciones iniciales:",o),r.label=6;case 6:return[3,9];case 7:return d=r.sent(),console.error("Error al cargar transacciones iniciales:",d),[3,9];case 8:return l(!1),[7];case 9:return[2]}})}),function(){return e.apply(this,arguments)})(),!function(){try{var e="".concat("http://localhost:8080/api/","sse");f.current=new EventSource(e),f.current.onmessage=function(e){try{var r=JSON.parse(e.data);console.log("Evento recibido:",r);var n={id:r._id,referencia:r.reference,monto:r.amount,fecha:r.date,estado:r.status,cliente:r.destination_account,vencimiento:"",fechaCreacion:r.date,payment_method:r.payment_method,amount:r.amount,destination_account:r.destination_account,source_account:r.source_account,beneficiary:r.beneficiary,whatsapp_phone:r.whatsapp_phone,support_url:r.support_url,date:r.date,userId:r.userId,createdAt:r.createdAt,updatedAt:r.updatedAt},s=String(n.estado||"").toLowerCase();if("pending"!==s&&"review"!==s){t(function(e){return e.filter(function(e){return e.id!==n.id})});return}t(function(e){return e.some(function(e){return e.id===n.id})?e.map(function(e){return e.id===n.id?n:e}):[n].concat((0,a.Z)(e))})}catch(c){console.error("Error al parsear datos SSE:",c),console.log("Datos raw recibidos:",e.data)}},f.current.onerror=function(e){console.error("Error en conexi\xf3n SSE:",e)},f.current.onopen=function(){console.log("Conexi\xf3n SSE establecida con:",e)}}catch(r){console.error("Error al configurar SSE:",r)}}(),function(){f.current&&(f.current.close(),console.log("Conexi\xf3n SSE cerrada"))}},[]);var h,b=function(e){t(function(r){return r.filter(function(r){return r.id!==e})})},j=(h=(0,n.Z)(function(e,r){var n,a,c,i,o,l;return(0,s.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),n="http://localhost:8080/api/",[4,fetch("".concat(n,"transactions/").concat(e,"/").concat(r),{method:"PUT",headers:{"Content-Type":"application/json"}})];case 1:if((c=a.sent()).ok){if(console.log("Transacci\xf3n ".concat(r," exitosamente")),"approve"===r||"reject"===r)return t(function(r){return r.filter(function(r){return r.id!==e})}),[2,{outcome:"removed"}];return[2,{outcome:"ok"}]}if(409!==c.status)return[3,3];return[4,c.text()];case 2:if((i=a.sent().toLowerCase()).includes("approved"))return t(function(r){return r.filter(function(r){return r.id!==e})}),[2,{outcome:"removed"}];if(i.includes("rejected"))return t(function(r){return r.filter(function(r){return r.id!==e})}),[2,{outcome:"removed"}];if(i.includes("review"))return[2,{outcome:"disableReview"}];throw Error("409: ".concat(i));case 3:return[4,c.text().catch(function(){return c.statusText})];case 4:throw o=a.sent(),console.error("Error al ".concat(r," la transacci\xf3n:"),o),Error("Error al ".concat(r," la transacci\xf3n: ").concat(o));case 5:throw l=a.sent(),console.error("Error al ".concat(r," la transacci\xf3n:"),l),l;case 6:return[2]}})}),function(e,r){return h.apply(this,arguments)});return(0,c.jsx)(v.Z,{children:(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,c.jsx)(g.Z,{isOpen:u,onToggle:x}),(0,c.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,c.jsx)(y.Z,{onMenuClick:x,title:"Transacciones"}),(0,c.jsx)("main",{className:"flex-1 p-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gesti\xf3n de Transacciones"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Administra las transacciones del sistema"})]}),(0,c.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",r.length," transacciones"]})]}),0===r.length?(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,c.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,c.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay transacciones"}),(0,c.jsx)("p",{className:"text-gray-500",children:"Las transacciones aparecer\xe1n aqu\xed cuando lleguen del sistema."})]}):(0,c.jsx)(p,{data:r,searchPlaceholder:"Buscar por referencia, cliente, estado o monto...",itemsPerPage:10,onTransactionRemove:b,onTransactionAction:j})]})})]})]})})}},797:function(e,r,t){"use strict";function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function a(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n(e,r)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(r,{Z:function(){return a}})},9638:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(8387);let a=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6615:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(8387);let a=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7119:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(8387);let a=(0,n.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[559,774,888,179],function(){return e(e.s=5347)}),_N_E=e.O()}]);