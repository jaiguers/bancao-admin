(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5075)}])},1868:function(e,t,n){"use strict";n.d(t,{I8:function(){return g}});var r=n(7568),s=n(7582);n(1876).Buffer;var u,a,o="auth_token",c="auth_user",i=function(){var e=localStorage.getItem(c);return e?JSON.parse(e):null},l=function(e,t){localStorage.setItem(o,e),localStorage.setItem(c,JSON.stringify(t))},f=function(){localStorage.removeItem(o),localStorage.removeItem(c)},h=function(){return!!localStorage.getItem(o)},d=(u=(0,r.Z)(function(e){var t,n,r,u,a,o;return(0,s.__generator)(this,function(s){switch(s.label){case 0:t=e.email,n=e.password,s.label=1;case 1:return s.trys.push([1,5,,6]),r="http://localhost:8080/api/",[4,fetch("".concat(r,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})})];case 2:if(!(u=s.sent()).ok)return[3,4];return[4,u.json()];case 3:return[2,s.sent()];case 4:return[2,null];case 5:return o=s.sent(),console.error("Error en autenticaci\xf3n:",o),[2,null];case 6:return[2]}})}),function(e){return u.apply(this,arguments)}),p=function(){f()},g={login:(a=(0,r.Z)(function(e,t){var n;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,d({email:e,password:t})];case 1:if(n=r.sent())return l(n.token,n.user),[2,{success:!0,user:n.user}];return[2,{success:!1,error:"Credenciales inv\xe1lidas"}]}})}),function(e,t){return a.apply(this,arguments)}),logout:p,isAuthenticated:h,getCurrentUser:i}},5075:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),s=n(7294),u=n(1163),a=n(1868);function o(){var e=(0,u.useRouter)();return(0,s.useEffect)(function(){a.I8.isAuthenticated()?e.push("/dashboard"):e.push("/login")},[e]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}}},function(e){e.O(0,[903,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);