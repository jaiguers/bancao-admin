(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3236:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(9729)}])},1868:function(e,r,t){"use strict";t.d(r,{I8:function(){return x}});var n=t(7568),s=t(7582);t(1876).Buffer;var a,o,i="auth_token",c="auth_user",u=function(){var e=localStorage.getItem(c);return e?JSON.parse(e):null},l=function(e,r){localStorage.setItem(i,e),localStorage.setItem(c,JSON.stringify(r))},d=function(){localStorage.removeItem(i),localStorage.removeItem(c)},f=function(){return!!localStorage.getItem(i)},m=(a=(0,n.Z)(function(e){var r,t,n,a,o,i;return(0,s.__generator)(this,function(s){switch(s.label){case 0:r=e.email,t=e.password,s.label=1;case 1:return s.trys.push([1,5,,6]),n="http://localhost:8080/api/",[4,fetch("".concat(n,"auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:t})})];case 2:if(!(a=s.sent()).ok)return[3,4];return[4,a.json()];case 3:return[2,s.sent()];case 4:return[2,null];case 5:return i=s.sent(),console.error("Error en autenticaci\xf3n:",i),[2,null];case 6:return[2]}})}),function(e){return a.apply(this,arguments)}),p=function(){d()},x={login:(o=(0,n.Z)(function(e,r){var t;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,m({email:e,password:r})];case 1:if(t=n.sent())return l(t.token,t.user),[2,{success:!0,user:t.user}];return[2,{success:!1,error:"Credenciales inv\xe1lidas"}]}})}),function(e,r){return o.apply(this,arguments)}),logout:p,isAuthenticated:f,getCurrentUser:u}},9729:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var n=t(7568),s=t(7582),a=t(5893),o=t(7294),i=t(1163),c=t(1868),u=t(6455),l=t.n(u);function d(){var e,r=(0,o.useState)(""),t=r[0],u=r[1],d=(0,o.useState)(""),f=d[0],m=d[1],p=(0,o.useState)(!1),x=p[0],h=p[1],g=(0,o.useState)(""),y=g[0],v=g[1],b=(0,i.useRouter)();(0,o.useEffect)(function(){c.I8.isAuthenticated()&&b.push("/dashboard")},[b]);var w=(e=(0,n.Z)(function(e){var r,n;return(0,s.__generator)(this,function(s){switch(s.label){case 0:e.preventDefault(),h(!0),v(""),s.label=1;case 1:return s.trys.push([1,7,9,10]),[4,c.I8.login(t,f)];case 2:if(!(r=s.sent()).success)return[3,4];return[4,l().fire({icon:"success",title:"\xa1Bienvenido!",text:"Hola ".concat(null===(n=r.user)||void 0===n?void 0:n.name,", has iniciado sesi\xf3n correctamente"),timer:2e3,showConfirmButton:!1})];case 3:return s.sent(),b.push("/dashboard"),[3,6];case 4:return[4,l().fire({icon:"error",title:"Error de autenticaci\xf3n",text:r.error||"Credenciales inv\xe1lidas",confirmButtonText:"Intentar de nuevo"})];case 5:s.sent(),v(r.error||"Error al iniciar sesi\xf3n"),s.label=6;case 6:return[3,10];case 7:return s.sent(),[4,l().fire({icon:"error",title:"Error de conexi\xf3n",text:"No se pudo conectar con el servidor. Verifica tu conexi\xf3n.",confirmButtonText:"Intentar de nuevo"})];case 8:return s.sent(),v("Error de conexi\xf3n"),[3,10];case 9:return h(!1),[7];case 10:return[2]}})}),function(r){return e.apply(this,arguments)});return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Bancao Admin"}),(0,a.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Inicia sesi\xf3n en tu cuenta"})]}),(0,a.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:w,children:[(0,a.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Email",value:t,onChange:function(e){return u(e.target.value)}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Contrase\xf1a"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Contrase\xf1a",value:f,onChange:function(e){return m(e.target.value)}})]})]}),y&&(0,a.jsx)("div",{className:"text-red-600 text-sm text-center",children:y}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",disabled:x,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Iniciando sesi\xf3n...":"Iniciar sesi\xf3n"})}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[(0,a.jsx)("p",{children:"Inicia sesi\xf3n con tus credenciales"}),(0,a.jsxs)("p",{children:["Backend: ","http://localhost:8080/api/"]})]})]})]})})}}},function(e){e.O(0,[166,903,774,888,179],function(){return e(e.s=3236)}),_N_E=e.O()}]);